<?xml version="1.0"?>
<odoo>
    <record id="account_move_view_form_inherit_lob_account" model="ir.ui.view">
        <field name="name">Account Move Form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet/group[1]/group[1]/field[last()]" position="after">
                <field name="business_line_id" attrs="{'readonly': [('state','not in',['draft'])]}"
                       groups="lob.group_lob" options="{'no_create': True, 'no_create_edit':True, 'no_open':True}"/>
                <field name="project_id"/>
            </xpath>
            <xpath expr="//group[1]" position="before">
                <group>
                    <field name="serie" attrs="{'invisible':[('move_type','!=','in_invoice')]}"/>
                    <field name="folio" attrs="{'invisible':[('move_type','!=','in_invoice')]}"/>
                </group>
            </xpath>
            <xpath expr="//header">
                <button name="carga" string="Carga de XML" type="object"
                        attrs="{'invisible':['|','|',('move_type','!=','in_invoice'),('serie','!=',False),('folio','!=',False)]}"
                        class="oe_highlight"/>
            </xpath>
        </field>
    </record>
    <record id="account_move_view_form_inherit_lob_account2" model="ir.ui.view">
        <field name="name">Account Move Form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="l10n_mx_edi.view_l10n_mx_edi_invoice_form_inherit"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet/group//group[last()]/field[@name='l10n_mx_edi_cfdi_uuid']" position="replace">
                <!-- CFDI -->
                <field name="l10n_mx_edi_cfdi_uuid"/>
            </xpath>
        </field>
    </record>
    <!--Tree-->
    <record id="account_move_view_tree_inherit_lob_account" model="ir.ui.view">
        <field name="name">Account Move Tree</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_invoice_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[last()]" position="after">
                <field name="business_line_id" optional="show"/>
                <field name="project_id" optional="show"/>
            </xpath>
        </field>
    </record>
    <!--Search-->
    <record id="account_move_view_search_inherit_lob_account" model="ir.ui.view">
        <field name="name">Account Move Search</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_account_invoice_filter"/>
        <field name="arch" type="xml">
            <xpath expr="//group[1]/filter[last()]" position="after">
                <separator/>
                <filter string="Proyecto" name="project" context="{'group_by': 'project_id'}"/>
                <filter string="LÃ­nea de negocio" name="linea" context="{'group_by': 'business_line_id'}"/>
            </xpath>
        </field>
    </record>
</odoo>
